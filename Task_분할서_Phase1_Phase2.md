# Task 분할서: Phase 1 & Phase 2
## 한국 주식 투자 포트폴리오 시스템

**작성일:** 2025-10-19
**총 기간:** 7주 (35 근무일)
**일일 작업 시간:** 6-8시간

---

## 📅 Week 1: 환경 구축 및 API 연동 테스트 (5일)

### Day 1: 프로젝트 초기화 및 PostgreSQL 설정

#### 🎯 목표
- 프로젝트 디렉토리 구조 생성
- PostgreSQL 데이터베이스 설치 및 초기 설정
- 기본 환경 변수 구성

#### ✅ Task List
- **Task 1.1**: 프로젝트 디렉토리 생성 (collectors, calculators, pipelines, models, db, config, scripts, tests, docker) (30분)
- **Task 1.2**: Git 초기화 및 .gitignore 설정 (15분)
- **Task 1.3**: Python 3.13 가상환경 생성 (15분)
- **Task 1.4**: requirements.txt 작성 및 기본 패키지 설치 (SQLAlchemy, pandas, httpx, loguru 등) (30분)
- **Task 1.5**: PostgreSQL 15 설치 및 stock_portfolio DB 생성 (1시간)
- **Task 1.6**: .env 파일 생성 (DB, API 키 설정) (30분)
- **Task 1.7**: DB 연결 모듈 작성 (db/connection.py) (1시간)

#### 📝 검증 항목
- 프로젝트 디렉토리 구조 확인
- PostgreSQL 연결 테스트 성공
- Python 패키지 설치 확인 (pip list)
- .env 파일 로드 테스트

---

### Day 2: 데이터베이스 스키마 생성

#### 🎯 목표
- SQLAlchemy 모델 정의
- 6개 핵심 테이블 생성 (stocks, daily_prices, financial_statements, financial_ratios, sectors, corp_code_map)
- 인덱스 및 제약조건 설정

#### ✅ Task List
- **Task 2.1**: Base 모델 및 TimestampMixin 작성 (30분)
- **Task 2.2**: Sector 모델 작성 (계층 구조 지원) (30분)
- **Task 2.3**: Stock 모델 작성 (ticker, name, market, sector_id 등) (45분)
- **Task 2.4**: DailyPrice 모델 작성 (OHLCV + 파티셔닝 준비) (1시간)
- **Task 2.5**: FinancialStatement 모델 작성 (JSONB 컬럼 사용) (1시간)
- **Task 2.6**: FinancialRatio 모델 작성 (30개 재무비율 컬럼) (1시간)
- **Task 2.7**: CorpCodeMap 모델 작성 (ticker ↔ corp_code 매핑) (30분)
- **Task 2.8**: init_db.py 스크립트 작성 및 테이블 생성 (30분)

#### 📝 검증 항목
- PostgreSQL에서 6개 테이블 생성 확인 (\dt)
- 인덱스 생성 확인 (\di)
- 외래키 제약조건 확인
- 샘플 데이터 삽입/조회 테스트

---

### Day 3: KRX API 연동 및 종목 리스트 수집

#### 🎯 목표
- KRX Open API 연동 테스트
- KRXCollector 클래스 구현
- 전체 상장 종목 리스트 수집 및 DB 저장

#### ✅ Task List
- **Task 3.1**: KRX API 테스트 스크립트 작성 (scripts/test_krx_api.py) (30분)
- **Task 3.2**: KRXCollector 클래스 구현 (fetch_stock_list 메서드) (2시간)
- **Task 3.3**: 종목 수집 실행 스크립트 작성 (KOSPI + KOSDAQ) (30분)
- **Task 3.4**: 실행 및 검증 (1시간)

#### 📝 검증 항목
- KRX API 연결 성공 (200 응답)
- stocks 테이블에 2,500+ 종목 저장
- 시장별 종목 수 확인 (KOSPI ~900, KOSDAQ ~1,600)
- 데이터 품질 확인 (NULL, 중복 체크)

---

### Day 4: KIS API 연동 및 시세 데이터 수집

#### 🎯 목표
- KIS Open API 연동 (기존 kis-trading-mcp 활용)
- KISPriceCollector 클래스 구현
- 샘플 종목 10개 10년치 시세 수집

#### ✅ Task List
- **Task 4.1**: KIS API 연결 테스트 (현재가, 과거 시세 조회) (30분)
- **Task 4.2**: KISPriceCollector 클래스 구현 (Rate Limiting 포함) (3시간)
- **Task 4.3**: 시세 수집 실행 스크립트 작성 (샘플 10개 종목) (30분)
- **Task 4.4**: 실행 및 검증 (1시간)

#### 📝 검증 항목
- KIS API 연결 성공
- daily_prices 테이블에 25,000건 저장 (10종목 × 2,500일)
- 데이터 완전성 확인 (날짜 범위, OHLCV 값)
- Rate Limiting 작동 확인 (로그 체크)

---

### Day 5: DART API 연동 및 재무제표 수집

#### 🎯 목표
- DART Open API 연동
- corp_code.xml 다운로드 및 매핑 테이블 구축
- 샘플 10개 종목 재무제표 수집 (3개년)

#### ✅ Task List
- **Task 5.1**: DART API Key 발급 및 .env 설정 (30분)
- **Task 5.2**: corp_code.xml 다운로드 및 파싱 (1시간)
- **Task 5.3**: DARTCollector 클래스 구현 (재무제표 조회 API) (2시간)
- **Task 5.4**: JSONB 형식으로 재무제표 저장 로직 구현 (1.5시간)
- **Task 5.5**: 샘플 10개 종목 재무제표 수집 스크립트 작성 (1시간)
- **Task 5.6**: 수집 실행 및 DB 저장 (1시간)

#### 📝 검증 항목
- DART API 연결 테스트 통과
- corp_code_map 테이블에 2,500+ 기업 매핑 저장
- financial_statements 테이블에 샘플 10개 종목 × 3년 × 4분기 = 120건 저장
- JSONB 데이터 구조 확인 (balance_sheet, income_statement, cashflow_statement)

---

## 📅 Week 2: 전체 종목 데이터 수집 (5일)

### Day 6: 전체 종목 시세 수집 시작 (1/5)

#### 🎯 목표
- 전체 2,500개 종목 중 500개 종목 10년치 시세 수집

#### ✅ Task List
- **Task 6.1**: 종목 리스트를 5개 그룹으로 분할 (500개씩) (30분)
- **Task 6.2**: 배치 수집 스크립트 작성 (재시작 가능하도록 checkpoint 구현) (1.5시간)
- **Task 6.3**: 첫 번째 그룹 (종목 1-500) 수집 실행 (4시간)
- **Task 6.4**: 수집 로그 모니터링 및 오류 처리 (1시간)

#### 📝 검증 항목
- 500개 종목 × 2,500일 = 1,250,000건 데이터 저장 확인
- 실패한 종목 리스트 확인 및 재시도

---

### Day 7: 전체 종목 시세 수집 계속 (2/5)

#### 🎯 목표
- 두 번째 그룹 500개 종목 수집

#### ✅ Task List
- **Task 7.1**: 두 번째 그룹 (종목 501-1000) 수집 실행 (4시간)
- **Task 7.2**: 수집 진행 상황 모니터링 대시보드 작성 (1시간)
- **Task 7.3**: 데이터 품질 체크 스크립트 작성 (결측치, 이상치 탐지) (2시간)

#### 📝 검증 항목
- 누적 1,000개 종목 데이터 저장
- 데이터 품질 리포트 생성 (NULL 비율, 이상치 개수)

---

### Day 8: 전체 종목 시세 수집 계속 (3/5)

#### 🎯 목표
- 세 번째 그룹 500개 종목 수집

#### ✅ Task List
- **Task 8.1**: 세 번째 그룹 (종목 1001-1500) 수집 실행 (4시간)
- **Task 8.2**: Rate Limiting 최적화 (병렬 처리 추가) (2시간)
- **Task 8.3**: 수집 오류 자동 재시도 로직 추가 (1시간)

#### 📝 검증 항목
- 누적 1,500개 종목 데이터 저장
- 수집 속도 개선 확인 (시간당 처리 종목 수)

---

### Day 9: 전체 종목 시세 수집 계속 (4/5)

#### 🎯 목표
- 네 번째 그룹 500개 종목 수집

#### ✅ Task List
- **Task 9.1**: 네 번째 그룹 (종목 1501-2000) 수집 실행 (4시간)
- **Task 9.2**: 파티셔닝 전략 적용 (daily_prices를 연도별 파티션으로 분할) (2시간)
- **Task 9.3**: 인덱스 최적화 (쿼리 성능 개선) (1시간)

#### 📝 검증 항목
- 누적 2,000개 종목 데이터 저장
- 파티션별 데이터 분포 확인
- 쿼리 성능 측정 (EXPLAIN ANALYZE)

---

### Day 10: 전체 종목 시세 수집 완료 (5/5)

#### 🎯 목표
- 마지막 그룹 500개 종목 수집 및 전체 검증

#### ✅ Task List
- **Task 10.1**: 다섯 번째 그룹 (종목 2001-2500) 수집 실행 (4시간)
- **Task 10.2**: 전체 데이터 완전성 검증 (2,500개 종목 × 2,500일) (1시간)
- **Task 10.3**: 누락 데이터 재수집 (1시간)
- **Task 10.4**: Week 2 완료 보고서 작성 (30분)

#### 📝 검증 항목
- 총 2,500개 종목 × 2,500일 = 6,250,000건 데이터 저장
- 데이터 커버리지 99% 이상
- 테이블 크기 및 디스크 사용량 확인

---

## 📅 Week 3: 재무제표 및 재무비율 계산 (5일)

### Day 11: 전체 종목 재무제표 수집 시작

#### 🎯 목표
- 전체 2,500개 종목 재무제표 수집 (최근 5년, 연간 + 분기)

#### ✅ Task List
- **Task 11.1**: DART API를 활용한 배치 수집 스크립트 작성 (1시간)
- **Task 11.2**: 첫 500개 종목 재무제표 수집 (5년 × 4분기 = 20건/종목) (4시간)
- **Task 11.3**: JSONB 데이터 검증 (필수 계정과목 존재 여부 확인) (1시간)

#### 📝 검증 항목
- 500개 종목 × 20건 = 10,000건 재무제표 저장
- 필수 계정과목 (자산총계, 부채총계, 자본총계, 매출액, 영업이익, 당기순이익) 존재율 95% 이상

---

### Day 12: 재무제표 수집 계속 및 파싱 로직 개선

#### 🎯 목표
- 추가 1,000개 종목 수집 및 계정과목 표준화

#### ✅ Task List
- **Task 12.1**: 두 번째 그룹 500개 종목 수집 (4시간)
- **Task 12.2**: 세 번째 그룹 500개 종목 수집 (4시간)
- **Task 12.3**: 계정과목 이름 표준화 매핑 테이블 작성 (예: "자산총계" ↔ "총자산") (2시간)

#### 📝 검증 항목
- 누적 1,500개 종목 재무제표 저장 (30,000건)
- 계정과목 표준화 매핑 100개 이상

---

### Day 13: 재무제표 수집 완료

#### 🎯 목표
- 나머지 1,000개 종목 수집 완료

#### ✅ Task List
- **Task 13.1**: 네 번째 그룹 500개 종목 수집 (4시간)
- **Task 13.2**: 다섯 번째 그룹 500개 종목 수집 (4시간)
- **Task 13.3**: 수집 실패 종목 재시도 (1시간)

#### 📝 검증 항목
- 총 2,500개 종목 × 20건 = 50,000건 재무제표 저장
- 데이터 커버리지 95% 이상

---

### Day 14: 재무비율 계산 로직 구현 (1/2)

#### 🎯 목표
- FinancialRatioCalculator 클래스 구현 (15개 지표)

#### ✅ Task List
- **Task 14.1**: FinancialRatioCalculator 클래스 골격 작성 (1시간)
- **Task 14.2**: 수익성 지표 계산 (ROE, ROA, ROIC, 영업이익률, 순이익률) (2시간)
- **Task 14.3**: 안정성 지표 계산 (부채비율, 유동비율, 당좌비율) (1.5시간)
- **Task 14.4**: 활동성 지표 계산 (자산회전율, 재고자산회전율) (1.5시간)
- **Task 14.5**: 단위 테스트 작성 (1시간)

#### 📝 검증 항목
- 15개 지표 계산 함수 구현 완료
- 단위 테스트 통과율 100%

---

### Day 15: 재무비율 계산 로직 구현 (2/2)

#### 🎯 목표
- 나머지 지표 구현 및 전체 종목 계산

#### ✅ Task List
- **Task 15.1**: 성장성 지표 계산 (매출액 증가율, 순이익 증가율) (1시간)
- **Task 15.2**: 밸류에이션 지표 계산 (PER, PBR, PSR, PCR, EV/EBITDA) (2시간)
- **Task 15.3**: Magic Formula 지표 계산 (Earnings Yield, ROIC) (1시간)
- **Task 15.4**: 전체 종목 재무비율 계산 실행 (2시간)
- **Task 15.5**: 계산 결과 검증 (이상치 탐지) (1시간)

#### 📝 검증 항목
- financial_ratios 테이블에 2,500개 종목 × 20건 = 50,000건 저장
- 이상치 비율 5% 미만

---

## 📅 Week 4: 데이터 품질 개선 및 파이프라인 구축 (5일)

### Day 16: 데이터 정합성 검증

#### 🎯 목표
- 시세/재무 데이터 정합성 검증 및 오류 수정

#### ✅ Task List
- **Task 16.1**: 시세 데이터 정합성 검증 (OHLC 관계, 거래량 음수 체크) (2시간)
- **Task 16.2**: 재무 데이터 정합성 검증 (자산=부채+자본 등식) (2시간)
- **Task 16.3**: 재무비율 이상치 탐지 및 재계산 (2시간)
- **Task 16.4**: 오류 수정 로그 작성 (1시간)

#### 📝 검증 항목
- 데이터 정합성 오류 95% 이상 수정
- 오류 리포트 생성

---

### Day 17: 결측치 처리 파이프라인

#### 🎯 목표
- 결측치 탐지 및 처리 전략 구현

#### ✅ Task List
- **Task 17.1**: 결측치 탐지 스크립트 작성 (1시간)
- **Task 17.2**: 시세 데이터 결측치 보간 (선형 보간, forward fill) (2시간)
- **Task 17.3**: 재무 데이터 결측치 처리 전략 (NULL 유지 vs 이전 분기 값 사용) (2시간)
- **Task 17.4**: 처리 결과 검증 (2시간)

#### 📝 검증 항목
- 시세 데이터 결측치 90% 이상 보간
- 재무 데이터 결측치 처리 전략 문서화

---

### Day 18: 이상치 탐지 및 처리

#### 🎯 목표
- 통계적 방법으로 이상치 탐지 및 처리

#### ✅ Task List
- **Task 18.1**: IQR/Z-score 기반 이상치 탐지 (2시간)
- **Task 18.2**: 이상치 플래깅 (삭제하지 않고 표시) (1시간)
- **Task 18.3**: 이상치 리포트 생성 (종목별, 지표별) (2시간)
- **Task 18.4**: 수동 검토가 필요한 항목 추출 (1시간)

#### 📝 검증 항목
- 이상치 탐지율 3-5%
- 이상치 리포트 생성 완료

---

### Day 19: 증분 업데이트 파이프라인 구현

#### 🎯 목표
- 일일 증분 업데이트 로직 구현

#### ✅ Task List
- **Task 19.1**: 일일 시세 업데이트 스크립트 작성 (전일 데이터만 수집) (2시간)
- **Task 19.2**: 분기 재무제표 업데이트 스크립트 작성 (1.5시간)
- **Task 19.3**: 재무비율 재계산 트리거 로직 (1.5시간)
- **Task 19.4**: 증분 업데이트 테스트 (1시간)

#### 📝 검증 항목
- 일일 시세 업데이트 30분 이내 완료
- 분기 재무제표 업데이트 2시간 이내 완료

---

### Day 20: 데이터 버전 관리 및 백업

#### 🎯 목표
- 데이터 버전 관리 및 자동 백업 시스템 구축

#### ✅ Task List
- **Task 20.1**: PostgreSQL 자동 백업 스크립트 작성 (pg_dump) (1시간)
- **Task 20.2**: 주요 테이블 스냅샷 기능 구현 (1시간)
- **Task 20.3**: 백업 복구 테스트 (2시간)
- **Task 20.4**: Week 4 완료 보고서 작성 (1시간)

#### 📝 검증 항목
- 일일 자동 백업 cron job 설정 완료
- 백업 복구 성공률 100%

---

## 📅 Week 5: Airflow ETL 파이프라인 구축 (5일)

### Day 21: Airflow 설치 및 환경 설정

#### 🎯 목표
- Apache Airflow 설치 및 기본 설정

#### ✅ Task List
- **Task 21.1**: Airflow 설치 (pip install apache-airflow) (30분)
- **Task 21.2**: airflow.cfg 설정 (PostgreSQL 메타DB 연결) (1시간)
- **Task 21.3**: Airflow 웹서버 및 스케줄러 실행 (30분)
- **Task 21.4**: Connections 설정 (PostgreSQL, DART API, KIS API) (1시간)
- **Task 21.5**: 테스트 DAG 작성 및 실행 (1시간)

#### 📝 검증 항목
- Airflow 웹 UI 접속 가능 (http://localhost:8080)
- 테스트 DAG 실행 성공

---

### Day 22: 일일 시세 수집 DAG 구현

#### 🎯 목표
- 일일 시세 자동 수집 DAG 작성

#### ✅ Task List
- **Task 22.1**: daily_price_collection DAG 골격 작성 (1시간)
- **Task 22.2**: KIS API 호출 Task 구현 (PythonOperator) (2시간)
- **Task 22.3**: DB 저장 Task 구현 (2시간)
- **Task 22.4**: 실패 시 알림 설정 (email/slack) (1시간)
- **Task 22.5**: DAG 스케줄링 설정 (매일 오후 6시 실행) (30분)

#### 📝 검증 항목
- DAG 수동 실행 성공
- 2,500개 종목 일일 데이터 수집 완료 (30분 이내)

---

### Day 23: 분기 재무제표 수집 DAG 구현

#### 🎯 목표
- 분기별 재무제표 자동 수집 DAG 작성

#### ✅ Task List
- **Task 23.1**: quarterly_financial_statement DAG 작성 (1시간)
- **Task 23.2**: DART API 호출 Task 구현 (2시간)
- **Task 23.3**: 재무비율 계산 Task 구현 (2시간)
- **Task 23.4**: 데이터 품질 검증 Task 추가 (1시간)
- **Task 23.5**: 스케줄링 설정 (분기말 + 45일 실행) (1시간)

#### 📝 검증 항목
- DAG 수동 실행 성공
- 재무제표 및 재무비율 자동 계산

---

### Day 24: 데이터 품질 모니터링 DAG 구현

#### 🎯 목표
- 일일 데이터 품질 체크 자동화

#### ✅ Task List
- **Task 24.1**: data_quality_check DAG 작성 (1시간)
- **Task 24.2**: 결측치 탐지 Task (1시간)
- **Task 24.3**: 이상치 탐지 Task (1시간)
- **Task 24.4**: 데이터 정합성 검증 Task (1시간)
- **Task 24.5**: 품질 리포트 생성 및 알림 (2시간)

#### 📝 검증 항목
- 일일 품질 리포트 자동 생성
- 품질 이슈 발생 시 알림 전송

---

### Day 25: DAG 의존성 관리 및 최적화

#### 🎯 목표
- DAG 간 의존성 설정 및 성능 최적화

#### ✅ Task List
- **Task 25.1**: DAG 의존성 설정 (시세 수집 → 재무비율 계산 → 품질 체크) (1시간)
- **Task 25.2**: Task 병렬 처리 최적화 (2시간)
- **Task 25.3**: Task 재시도 로직 개선 (exponential backoff) (1시간)
- **Task 25.4**: 전체 파이프라인 통합 테스트 (2시간)
- **Task 25.5**: Week 5 완료 보고서 작성 (1시간)

#### 📝 검증 항목
- 전체 파이프라인 실행 시간 2시간 이내
- 실패율 1% 미만

---

## 📅 Week 6: 모니터링 및 최적화 (5일)

### Day 26: 로깅 시스템 구축

#### 🎯 목표
- 구조화된 로깅 시스템 구축

#### ✅ Task List
- **Task 26.1**: loguru 기반 통합 로깅 설정 (1시간)
- **Task 26.2**: 로그 레벨별 분리 (DEBUG/INFO/ERROR) (1시간)
- **Task 26.3**: 로그 로테이션 설정 (일별, 용량별) (1시간)
- **Task 26.4**: 구조화된 로그 포맷 정의 (JSON) (1시간)
- **Task 26.5**: 로그 집계 스크립트 작성 (2시간)

#### 📝 검증 항목
- 모든 모듈에서 통합 로거 사용
- 일별 로그 파일 자동 생성

---

### Day 27: 성능 모니터링 대시보드

#### 🎯 목표
- DB 성능 및 파이프라인 성능 모니터링

#### ✅ Task List
- **Task 27.1**: PostgreSQL 쿼리 성능 분석 (EXPLAIN ANALYZE) (2시간)
- **Task 27.2**: 느린 쿼리 로깅 설정 (1시간)
- **Task 27.3**: Airflow DAG 실행 시간 모니터링 (1시간)
- **Task 27.4**: 간단한 모니터링 대시보드 작성 (Streamlit) (2시간)

#### 📝 검증 항목
- 쿼리 실행 시간 95%가 1초 이내
- 대시보드 실시간 업데이트

---

### Day 28: 쿼리 최적화

#### 🎯 목표
- 주요 쿼리 성능 최적화

#### ✅ Task List
- **Task 28.1**: 인덱스 추가 최적화 (2시간)
- **Task 28.2**: 복합 인덱스 생성 (ticker + date) (1시간)
- **Task 28.3**: 파티션 프루닝 활성화 (1시간)
- **Task 28.4**: 쿼리 리팩토링 (JOIN 최적화) (2시간)

#### 📝 검증 항목
- 주요 쿼리 실행 시간 50% 이상 단축
- 인덱스 히트율 90% 이상

---

### Day 29: 알림 시스템 구축

#### 🎯 목표
- 오류 및 이벤트 알림 시스템

#### ✅ Task List
- **Task 29.1**: 이메일 알림 설정 (SMTP) (1시간)
- **Task 29.2**: Slack 웹훅 연동 (1시간)
- **Task 29.3**: 알림 규칙 정의 (오류 발생, 데이터 품질 저하 등) (2시간)
- **Task 29.4**: 알림 테스트 (1시간)

#### 📝 검증 항목
- 오류 발생 시 5분 이내 알림 전송
- 알림 false positive 비율 5% 미만

---

### Day 30: 문서화 및 Phase 1 완료

#### 🎯 목표
- 전체 시스템 문서화 및 Phase 1 마무리

#### ✅ Task List
- **Task 30.1**: API 문서 작성 (모든 Collector 클래스) (2시간)
- **Task 30.2**: DB 스키마 문서 작성 (ERD 포함) (1시간)
- **Task 30.3**: Airflow DAG 문서 작성 (1시간)
- **Task 30.4**: 운영 가이드 작성 (장애 대응, 백업 복구) (2시간)
- **Task 30.5**: Phase 1 최종 보고서 작성 (1시간)

#### 📝 검증 항목
- README.md, API.md, OPERATIONS.md 작성 완료
- ERD 다이어그램 생성
- Phase 1 완료 보고서 제출

---

## 📅 Week 7: Phase 2 - 투자 전략 및 백테스팅 (5일)

### Day 31: Magic Formula 전략 구현

#### 🎯 목표
- Joel Greenblatt의 마법의 공식 구현

#### ✅ Task List
- **Task 31.1**: Earnings Yield 계산 로직 검증 (1시간)
- **Task 31.2**: ROIC 계산 로직 검증 (1시간)
- **Task 31.3**: 종목 랭킹 알고리즘 구현 (2시간)
- **Task 31.4**: 상위 30개 종목 선정 로직 (1시간)
- **Task 31.5**: 스크리닝 결과 저장 (1시간)

#### 📝 검증 항목
- Magic Formula 기준 상위 30개 종목 선정
- 지표별 순위 정확성 검증

---

### Day 32: ROE/ROIC 기반 스크리닝 전략

#### 🎯 목표
- 고ROE, 고ROIC 종목 스크리닝

#### ✅ Task List
- **Task 32.1**: ROE 기반 필터링 (ROE > 15%) (1시간)
- **Task 32.2**: ROIC 기반 필터링 (ROIC > 12%) (1시간)
- **Task 32.3**: 안정성 필터 추가 (부채비율 < 200%) (1시간)
- **Task 32.4**: 밸류에이션 필터 추가 (PBR < 3) (1시간)
- **Task 32.5**: 복합 조건 스크리닝 결과 비교 (2시간)

#### 📝 검증 항목
- 각 전략별 선정 종목 수 확인
- 전략 간 종목 중복도 분석

---

### Day 33: 백테스팅 프레임워크 구현

#### 🎯 목표
- 간단한 백테스팅 엔진 구현

#### ✅ Task List
- **Task 33.1**: BacktestEngine 클래스 설계 (1시간)
- **Task 33.2**: 포트폴리오 리밸런싱 로직 (분기별/연간) (2시간)
- **Task 33.3**: 수익률 계산 (절대 수익률, 연환산 수익률) (1시간)
- **Task 33.4**: 벤치마크 비교 (KOSPI 지수) (1시간)
- **Task 33.5**: 백테스팅 결과 저장 테이블 설계 (1시간)

#### 📝 검증 항목
- 2015-2024 기간 백테스팅 실행 성공
- 연환산 수익률 계산 정확성

---

### Day 34: 성과 분석 및 시각화

#### 🎯 목표
- 백테스팅 결과 분석 및 시각화

#### ✅ Task List
- **Task 34.1**: 누적 수익률 그래프 (Matplotlib/Plotly) (1.5시간)
- **Task 34.2**: 연도별 수익률 테이블 (1시간)
- **Task 34.3**: 최대 낙폭(MDD) 계산 (1시간)
- **Task 34.4**: Sharpe Ratio 계산 (1시간)
- **Task 34.5**: 성과 리포트 PDF 생성 (2시간)

#### 📝 검증 항목
- 누적 수익률 그래프 생성
- Sharpe Ratio, MDD 정확성 검증
- PDF 리포트 자동 생성

---

### Day 35: Phase 2 완료 및 전체 시스템 통합 테스트

#### 🎯 목표
- Phase 2 완료 및 전체 시스템 검증

#### ✅ Task List
- **Task 35.1**: 전체 파이프라인 end-to-end 테스트 (2시간)
- **Task 35.2**: 통합 테스트 스크립트 작성 (1시간)
- **Task 35.3**: 성능 벤치마크 측정 (1시간)
- **Task 35.4**: Phase 2 최종 문서 작성 (2시간)
- **Task 35.5**: 프로젝트 최종 보고서 작성 및 발표 자료 준비 (2시간)

#### 📝 검증 항목
- 전체 시스템 통합 테스트 통과
- Phase 1 + Phase 2 완료 확인
- 최종 보고서 제출

---

## 📊 Task 분할서 요약

### Week 1-4: Phase 1 - 데이터 수집 및 ETL (20일)
- **Week 1**: 환경 구축, API 연동, 샘플 데이터 수집
- **Week 2**: 전체 종목 시세 수집 (2,500개 × 10년 = 6,250,000건)
- **Week 3**: 재무제표 수집 및 재무비율 계산 (50,000건)
- **Week 4**: 데이터 품질 개선 및 증분 업데이트

### Week 5-6: Airflow 파이프라인 및 모니터링 (10일)
- **Week 5**: Airflow DAG 구현 (일일 시세, 분기 재무제표, 품질 체크)
- **Week 6**: 로깅, 모니터링, 알림 시스템 구축

### Week 7: Phase 2 - 투자 전략 및 백테스팅 (5일)
- **Day 31-32**: Magic Formula, ROE/ROIC 스크리닝 전략
- **Day 33-34**: 백테스팅 엔진 및 성과 분석
- **Day 35**: 최종 통합 테스트 및 보고서

---

## ✅ 일일 검증 방법

각 Day 업무 종료 시 다음 항목을 체크하세요:

1. **코드 실행 성공** - 오류 없이 스크립트 실행 완료
2. **DB 데이터 저장 확인** - SQL 쿼리로 레코드 수 확인
3. **로그 파일 생성** - logs/ 디렉토리에 당일 로그 존재
4. **데이터 품질 검증** - NULL, 중복, 이상치 비율 확인
5. **성능 측정** - 실행 시간, 메모리 사용량 기록
6. **Daily Report 작성** - 완료 작업, 발생 이슈, 다음 날 계획 정리

---

**문서 버전:** 1.0
**최종 수정일:** 2025-10-19
